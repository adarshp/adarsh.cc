% Conditionals

\usepackage{etoolbox}
% Conditional typesetting things for annual performance review
\newtoggle{apr}
\togglefalse{apr}


% =============================================================================
% Metadata
% =============================================================================

\def\firstname{Adarsh}
\def\lastname{Pyarelal}
\def\myemail{adarsh@arizona.edu}
\def\myweb{adarsh.cc}
\def\department{School of Information}
\def\university{University of Arizona}
\def\city{Tucson}
\def\country{USA}
\def\state{Arizona}
\def\zipcode{85719}
\date{} % not used (revision control instead)

\newcommand{\name}{\firstname{} \lastname{}}

% =============================================================================
\usepackage[tracking]{microtype}
\usepackage{amsmath}

% =============================================================================
% Bibliography
% =============================================================================

\usepackage[
  eprint=false,
  url=false,
  doi=false,
  isbn=false,
  maxnames=100,
  giveninits=true,
  hyperref,
  sorting=ddt,
  bibstyle=publist,
  plauthorhandling=highlight,
  plnumbered=false,
  boldyear=false,
  marginyear=false,
  nameorder=given-family,
  %mergedate=true
]{biblatex}
\plauthorname[\firstname][]{\lastname}


\newbibmacro{string+doiurlisbn}[1]{%
  \iffieldundef{doi}{%
    \iffieldundef{url}{%
      \iffieldundef{isbn}{%
        \iffieldundef{issn}{%
          #1%
        }{%
          \href{http://books.google.com/books?vid=ISSN\thefield{issn}}{#1}%
        }%
      }{%
        \href{http://books.google.com/books?vid=ISBN\thefield{isbn}}{#1}%
      }%
    }{%
      \href{\thefield{url}}{#1}%
    }%
  }{%
    \href{http://dx.doi.org/\thefield{doi}}{#1}%
  }%
}


\DeclareFieldFormat{title}{\usebibmacro{string+doiurlisbn}{\mkbibemph{#1}}}
\DeclareFieldFormat[article,online]{journaltitle}{#1}
\DeclareFieldFormat[inproceedings]{booktitle}{#1}
\DeclareFieldFormat[article,incollection,inproceedings]{title}%
    {\usebibmacro{string+doiurlisbn}{\mkbibemph{#1}}}
\addbibresource{bibliography.bib}
\newcommand{\addendumasterisk}{\ifbibliography{*}{}}
% =============================================================================
\usepackage{fontawesome}
\usepackage{fontspec}
\setmainfont[%
  Ligatures = {Common, TeX},%Numbers = {OldStyle, Proportional},
  SmallCapsFeatures={Letters=SmallCaps,LetterSpace=2},
]{Arno Pro}
\setsansfont[%
    Numbers = {OldStyle, Proportional},
    BoldFont=* Semibold,
]{Myriad Pro}
\setmonofont{Menlo}[Scale=MatchLowercase]

% =============================================================================
% Colors
% =============================================================================

\usepackage[usenames, dvipsnames, table]{xcolor}
%\definecolor{webbrown}{rgb}{.6,0,0}
%\definecolor{Maroon}{cmyk}{0, 0.87, 0.68, 0.32}
%%\definecolor{RoyalBlue}{cmyk}{1, 0.50, 0, 0}
%\definecolor{Black}{cmyk}{0, 0, 0, 0}
%\definecolor{shadecolor}{gray}{0.9}

% =============================================================================
% Set up hyperlinks
% =============================================================================

\PassOptionsToPackage{pdftex,hyperfootnotes=false,pdfpagelabels=true}{hyperref}
    \usepackage{hyperref}  % backref linktocpage pagebackref
\pdfcompresslevel=9
\pdfadjustspacing=1

\hypersetup{%
    colorlinks=true, linktocpage=true, pdfstartpage=3, pdfstartview=FitV,%
    breaklinks=true, pdfpagemode=UseNone, pageanchor=true, pdfpagemode=UseOutlines,%
    plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
    hypertexnames=true, pdfhighlight=/O,%nesting=true,%frenchlinks,%
    urlcolor=MidnightBlue, linkcolor=MidnightBlue, citecolor=MidnightBlue,%
    pdftitle={Curriculum Vitae - \name{}},%
    pdfauthor={\name{}},%
    pdfsubject={},%
    pdfkeywords={},%
    pdfcreator={luaLaTeX},%
    pdfproducer={LaTeX}%
}


% =============================================================================
% Memoir package - layout and styling
% =============================================================================

% Here we set typeblock widths for the main body and the footnotes
\setlxvchars[\normalfont] % about 66 characters per column
\setxlvchars[\normalfont\footnotesize] % about 45 characters per column

%\renewcommand\midrule{\arrayrulecolor{gray}\midrule}
% Original
% lrmargins + year col should add up to 4.265

% Uncomment the two lines below to get about 66 characters in the typeblock for
% 12 point Arno Pro font.
%\setlrmarginsandblock{0.5in}{1in}{}
%\setulmarginsandblock{1.2in}{1.2in}{*}

% Smaller margins
\setlrmarginsandblock{1in}{1in}{*}
\setulmarginsandblock{1in}{1.1in}{*}

\chapterstyle{bringhurst}
\tightlists % Reduce spacing between list items

\setsecheadstyle{\large\scshape\hspace{0.0in}\MakeTextLowercase}

\newcommand{\heading}[1]{%
  \addlinespace\addlinespace
  \multicolumn{2}{l}{\Large\textsc{\MakeTextLowercase{#1}}}\\\addlinespace
  \toprule
}

% New column type for year
\newcolumntype{Y}{>{\raggedright}p{1.2in}}

%\newcolumntype{Y}{>{\raggedleft}p{1.265in}}
\newcolumntype{R}[1]{>{\raggedleft}p{#1}}
\newcolumntype{L}[1]{>{\raggedright}p{#1}}

\checkandfixthelayout


% =============================================================================
% Custom macros
% =============================================================================

% Custom section
\newcommand{\customsection}[1]{%
  {\centering \color{gray} \hrule}
  \section*{#1}%
}


\newcommand{\entry}[2]{#1 & #2}



\newcommand{\me}{\textbf{A. Pyarelal}}


\newcommand{\research}[1]{ & #1 }
\newcommand{\project}[1]{\medskip\textit{#1}\medskip}
\newcommand{\affiliation}[2]{\textsc{#1} & #2}
\newcommand{\media}[3]{\href{#1}{\emph{#2}} & #3}
\newcommand{\sympaper}{%
    {\small \faFileText}
}
\newcommand{\symworkshop}{%
    {\small \faGears}
}
\newcommand{\symposter}{%
    {\small \faThumbTack}
}


% Duration macro
% #1: Start year
% #2: Start month
% #3: End year
% #4: End month
\newcommand{\ongoingduration}[2]{#1-#2 -- }
\newcommand{\duration}[4]{#1-#2 -- #3-#4}

\newcommand{\subheading}[1]{%
    \addlinespace
    \addlinespace
    \multicolumn{2}{l}{\sffamily\bfseries #1}\\
    \addlinespace
}

\newcommand{\inrank}{\textcolor{Maroon}{\ensuremath{^{\mathcal{R}}}}}
\newcommand{\annualreview}{%
    \textcolor{Blue}{%
    \iftoggle{apr}{%
        \ensuremath{^{\mathcal{A}}}
    }{}
}}

% =============================================================================
% Misc layout commands

\linespread{1.05}
% =============================================================================
